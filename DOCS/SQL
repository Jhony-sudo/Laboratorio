CREATE USER 'Jhony'@'localhost' IDENTIFIED BY 'Jhony1920.';
GRANT ALL PRIVILEGES ON *.* TO 'Jhony'@'localhost';
UPDATE user SET plugin='auth_socket' WHERE User='Jhony';
CREATE SCHEMA `PRUEBALAB` ;


CREATE TABLE Usuario(
	Codigo INT AUTO_INCREMENT PRIMARY KEY,
	Nombre VARCHAR(30) NOT NULL,
	Email VARCHAR(30) NOT NULL,
	Tipo INT NOT NULL,
	Password VARCHAR(30) NOT NULL,
	Telefono INT NOT NULL
);

CREATE TABLE Paciente(
	Cui INT PRIMARY KEY,
	Nombre VARCHAR(30) NOT NULL,
	Nacimiento DATE NOT NULL,
	Sexo VARCHAR(2),
	NIT INT NOT NULL,
	Telefono INT NOT NULL
);

CREATE TABLE ESTUDIO (
	Nombre VARCHAR(20) PRIMARY KEY,
	Precio INT NOT NULL
);

CREATE TABLE EXAMEN (
	Nombre VARCHAR(20) PRIMARY KEY,
	Unidades VARCHAR(3) NOT NULL,
	RangoInferior INT NOT NULL,
	RangoSuperior INT NOT NULL
	
);

CREATE TABLE ASIGNACION_ESTUDIO (
	Estudio VARCHAR(20) NOT NULL,
	Examen VARCHAR(20) NOT NULL,
	
        CONSTRAINT fk_ESTUDIO FOREIGN KEY (Estudio) 
        REFERENCES ESTUDIO (Nombre),
        	
       	CONSTRAINT fk_EXAMEN FOREIGN KEY (Examen) 
        REFERENCES EXAMEN (Nombre)
);

alter table ASIGNACION_ESTUDIO add constraint PK_ASIGNACION_ESTUDIO primary key (Estudio,Examen);
